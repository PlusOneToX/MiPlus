<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/bootstrap.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <link rel="icon" href="img/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="css/login.css">
    <title>小米帐号 - 登录</title>

</head>

<body>
    <div class="LRapp">
        <!-- 左侧IMG -->
        <div class="miLeftCimage">
            <div class="leftbigimg"></div>
        </div>
        <!-- 右侧主体内容 -->
        <div class="miAccounts">
            <div class="mi-layout__header">

                <div class="headertop d-flex justify-content-between align-items-center flex-wrap">

                    <div class="headerlogobox d-flex align-items-center">
                        <a href="index.html" class=" d-flex align-items-center">
                            <img src="img/LR-img/logo-mi.png" alt="" class="headerlogo">
                        </a>
                        小米账号
                    </div>

                    <div class="headerright float-right d-flex flex-wrap">
                        <a href="">用户协议</a>
                        <a href="">隐私政策</a>
                        <a href="">帮助中心</a>
                        <span class="splitline"></span>

                        <a href="" class="algdd">中文(简体)
                            <span class="icomoon"></span>
                            <div class="lg-meun">
                                <ul>
                                    <li>‎‎中文(繁體)‎</li>
                                    <li>‎‎‎English</li>
                                </ul>
                            </div>
                        </a>

                    </div>

                </div>
            </div>

            <!--  -->
            <div class="LRwindowsbox">
                <div class="lrsmbox">
                    <div class="lrtitle">
                        <a href="login.html" class="signin">
                            登录
                            <span></span>
                        </a>

                        <a href="" class="signup">注册</a>
                    </div>
                    <br>
                    <div class="lrinput">
                        <div class="lrnameinpt">
                            <input type="text" id="miname" name="miname" value="">
                            <label for="miname" id="minametext">邮箱/手机号码/小米ID</label>
                        </div>

                        <div class="lrpwdinpt">
                            <input type="password" id="mipwd" name="mipwd" value="">
                            <label for="mipwd" id="mipwdtext">密码</label>
                        </div>

                        <button class="lrbtn" onclick="login()">登录</button>

                        <div class="lrhelp d-flex justify-content-between">
                            <a href="">忘记密码</a>
                            <a href="">手机号登录</a>
                        </div>
                    </div>

                    <div class="lromglr">
                        <p>其他方式登录</p>
                        <div>
                            <a href="">
                                <img src="img/LR-img/QQ.png" alt="">
                            </a>

                            <a href="">
                                <img src="img/LR-img/WB.png" alt="">
                            </a>

                            <a href="">
                                <img src="img/LR-img/ZFB.png" alt="">
                            </a>

                            <a href="">
                                <img src="img/LR-img/WX.png" alt="">
                            </a>
                        </div>
                    </div>
                </div>

                <div class="mi-copyright">小米公司版权所有-京ICP备10046444-
                    <a href="">京公网安备11010802020134号</a>-京ICP证110507号</div>

            </div>

        </div>
    </div>
</body>

<script>
    function login() {
        //0.获取用户输入的信息
        var miname = document.getElementById("miname").value;
        var mipwd = document.getElementById("mipwd").value;
        if (!miname) {
            alert("用户名不能为空！！");
            return;
        }
        if (!mipwd) {
            alert("密码不能为空！！");
            return;
        }
        //1.创建xhr异步对象
        var xhr = new XMLHttpRequest();
        //4.打开监听，接收响应
        xhr.onreadystatechange = function () {
            if (xhr.readyState == 4 && xhr.status == 200) {
                var r = xhr.responseText;
                if (r == 1) {
                    alert("登录成功");
                    //js跳转页面的写法
                    location.href = "http://127.0.0.1:8080/index.html";
                } else {
                    alert("邮箱/手机号码/小米ID或密码错误");
                }
            }
        }
        //2.创建请求，打开连接
        xhr.open("get", `mi/login/${miname}&${mipwd}`, true);
        //3.发送请求
        xhr.send();
    }

    window.onload = function () {
        var inputname = document.querySelector('#miname');
        var inputpwd = document.querySelector('#mipwd');

        var minametext = document.getElementById("minametext");
        var mipwdtext = document.getElementById("mipwdtext");

        inputname.onblur = function () {
            if (this.value != null) {
                minametext.style.top = "6px";
                minametext.style.fontSize = "12px";
            }
        }

        inputpwd.onblur = function () {
            console.log(this.value);
            if (this.value != null || this.value != "") {
                mipwdtext.style.top = "6px";
                mipwdtext.style.fontSize = "12px";
            }
        }
    }
</script>

</html>